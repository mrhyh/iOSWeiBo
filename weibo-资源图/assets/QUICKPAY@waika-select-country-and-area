{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"content":"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui","name":"viewport","tag":"meta"},{"src":"waika-select-country-and-area.js","tag":"script"},{"children":[{"tag":"text","text":"var is_flybird = navigator.userAgent.toLowerCase().indexOf(\"flybird\")>=0;//### 是否为飞鸟引擎\nvar is_android = navigator.userAgent.toLowerCase().indexOf(\"android\")>=0;//### 是否为android平台\nvar path = is_android ? \"com.alipay.android.app/\" : \"AlipaySDK.bundle/\";\n\nvar nav_back_png = path + \"back.png\";\nvar arrow_right_png = path + \"arrow_right.png\";\n\nvar body_height = 0;\nvar index_array = new Array();\nvar index_height_array = new Array();\nvar index_height = 18;\nvar is_touch_hold = false;\n\nfunction scrollToIndex(index) {\n\tif (index >= 0 && index < index_array.length) {\n\t\tdocument.getElementById('main_body').scrollTop = index_height_array[index];\n\t}\n}\n\nfunction touchDown() {\n\tvar y = event.y;\n\ty -= document.getElementById('main_index').offsetTop;\n\t\n\tvar index = Math.floor(y / index_height);\n\tscrollToIndex(index);\n\t\n\tis_touch_hold = true;\n}\n\nfunction touchUp() {\n\tis_touch_hold = false;\n}\n\nfunction touchMove() {\n\n\tif (is_touch_hold) {\n\t\tvar y = event.y;\n\t\ty -= document.getElementById('main_index').offsetTop;\n\t\n\t\tvar index = Math.floor(y / index_height);\n\t\tscrollToIndex(index);\n\t}\n}\n\nfunction createItem(items) {\n    var main_body = document.getElementById('main_body');\n    \n    index_height_array.push(body_height);\n    \n    var common_cell = document.createElement(\"div\");\n    common_cell.className = \"common_cell common_padding_left_right common_cell_more_height\";\n    common_cell.style.height = \"22px\";\n    common_cell.style.backgroundColor = \"#cccccc\";\n    main_body.appendChild(common_cell);\n    \n    //### 字母行\n    var common_cell_small_text = document.createElement(\"p\");\n    common_cell_small_text.className = \"common_p_reset common_cell_small_text_size\";\n    common_cell_small_text.innerText = items[\"label\"];\n    common_cell.appendChild(common_cell_small_text);\n        \n    body_height += 22;\n        \n    for (var i = 0; i < items[\"countries\"].length; i++) {\n        //### 国家项\n        var common_cell_item = document.createElement(\"div\");\n        \n        common_cell_item.className = \"common_cell common_padding_left_right common_cell_more_height\";\n        main_body.appendChild(common_cell_item);\n        \n        var country = items[\"countries\"][i];\n    \tcommon_cell_item.value = country.code + \"|\" + country.name;\n    \t\n        common_cell_item.onclick = function(e){\n        \tvar obj = {};\n            obj[\"action\"] = {};\n            obj[\"action\"][\"name\"] = \"/card/wkSetBillAddress\";\n            \n            var submit_obj = {};\n\t\t\tvar value = e.currentTarget.value;\n            var array = value.split(\"|\");\n            submit_obj[\"nationality\"] = array[0];\n            submit_obj[\"nationality_name\"] = array[1];\n            submit_obj[\"from_select\"] = \"true\";\n            obj[\"param\"] = submit_obj;\n            \n            ant.submit(obj);\n        };\n        \n        //### 国家项中的名字\n        var label_country_name = document.createElement(\"label\");\n        label_country_name.className = \"common_left_box common_cell_small_text_size\";\n        label_country_name.innerText = items[\"countries\"][i].name;\n        common_cell_item.appendChild(label_country_name);\n        \n        var common_cell_center_box = document.createElement(\"div\");\n        common_cell_center_box.className = \"common_cell_center_box\";\n        common_cell_item.appendChild(common_cell_center_box);\n        \n        /*var label_country_areaCode =document.createElement(\"label\");\n        label_country_areaCode.className = \"common_cell_small_text_size\";\n        label_country_areaCode.innerText = items[\"countries\"][i].areaCode;\n        common_cell_item.appendChild(label_country_areaCode);*/\n        \n        body_height += 64;\n            \n        //### 分割线\n        if (i < items[\"countries\"].length-1) {\n            var line = document.createElement(\"div\");\n            line.className = \"common_1px_line\";\n            main_body.appendChild(line);\n            \n            if (is_flybird) {\n             \tbody_height += 0.5;\n            }\n            else {\n            \t//### chrome不支持半个逻辑像素\n              \tbody_height += 1;\n            }\n        }\n        \n    }\n    \n    //### 字母\n    index_array.push(items[\"label\"]);\n}\n\n//### 返回cashier-phone-login\nfunction onBack() {\n\tant.submit({\"action\":{\"name\":\"loc:back\"}});\n}\n\nfunction init() {\n\nif(is_android){\n\t\tdocument.getElementById(\"ios_nav\").style.display = \"none\";\n\t\tdocument.getElementById('nav_back_img_android').src = nav_back_png;\n\t} else{\n        if (!is_android) {\n            \n        }\n        else {\n            document.getElementById(\"android_nav\").style.display = \"none\";\n        }\n\n\t\t//### 加载图片资源\n\t\tdocument.getElementById('nav_back_img').src = nav_back_png;\n\t}\n\n    //### 创建国家列表\n\tfor (var i = 0; i < flybird.rpcData.countries.length; i++) {\n        createItem(flybird.rpcData.countries[i]);\n\t}\n\t\n\tvar main_index = document.getElementById('main_index');\n\t\n\tfor (var i = 0; i < index_array.length; i++) {\n\t\tvar index_box = document.createElement(\"div\");\n\t\tindex_box.className = \"index_box\";\n\t\tmain_index.appendChild(index_box);\n\t\t\n\t\tvar index_label = document.createElement(\"label\");\n\t\tindex_label.className = \"index_label common_theme_text_color\";\n\t\tindex_label.innerText = index_array[i];\n\t\tindex_box.appendChild(index_label);\n\t}\n\t\n\tvar h = window.innerHeight;\n\tif (!is_flybird) {\n\t\th -= document.getElementById('nav').offsetHeight;\n\t}\n\t\n\tdocument.getElementById('main_body').style.height = h;\n\tdocument.getElementById('main_index').style.height = index_height * index_array.length;\n}"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"children":[{"tag":"text","text":".index_box {width:15px; height:18px;}\n.index_label {font-size:15px;}"}],"tag":"style"},{"tag":"style"}],"tag":"head"},{"children":[{"children":[{"children":[{"children":[{"css":"common_nav_left_img","id":"nav_back_img","tag":"img"},{"children":[{"tag":"text","text":"返回"}],"css":"common_nav_left_text","tag":"p"}],"css":"common_nav_left_box","id":"nav_back","onclick":"onBack()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"选择国家和地区"}],"css":"common_nav_center_text common_p_reset","tag":"p"}],"css":"common_nav_center_box","tag":"div"},{"css":"common_nav_right_box","tag":"div"}],"css":"common_nav_box","id":"ios_nav","tag":"div"},{"children":[{"children":[{"children":[{"css":"common_nav_left_img_android","id":"nav_back_img_android","tag":"img"}],"css":"common_nav_back_box_android","onclick":"onBack()","tag":"div"},{"css":"common_nav_line_android","tag":"div"},{"children":[{"tag":"text","text":"选择国家和地区"}],"css":"common_nav_center_text common_p_reset","tag":"label"}],"css":"common_nav_title_android","id":"nav_back","tag":"div"},{"css":"common_nav_right_box","tag":"div"}],"css":"common_nav_box_android","id":"android_nav","tag":"div"}],"tag":"nav"},{"children":[{"id":"main_body","style":"overflow:scroll; -webkit-box-flex:1.0;","tag":"div"},{"id":"main_index","onmousedown":"touchDown()","onmousemove":"touchMove()","onmouseup":"touchUp()","style":"width:15px; background-color:#ffffff;","tag":"div"}],"css":"common_cell_box","tag":"div"}],"css":"common_full_body","id":"body","onkeydown":"onBack();","onload":"init()","style":"background-color:#ffffff;overflow:normal;","tag":"body"}],"tag":"html"},"format":"JSON","name":"waika-select-country-and-area","publishVersion":"150604","tag":"QUICKPAY","time":"0043","tplId":"QUICKPAY@waika-select-country-and-area","tplVersion":"5.0.0"}