{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"content":"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui","name":"viewport","tag":"meta"},{"src":"cashier-pre-confirm.js","tag":"script"},{"src":"common.js","tag":"script"},{},{"src":"AlipaySDK.bundle/common.js","tag":"script"},{"children":[{"tag":"text","text":"var loadingGif=path+\"loading.gif\";var successNoRepeatGif=path+\"success_norepeat.gif\";var closePng=path+\"close.png\";var arrowRightPng=path+\"arrow_right.png\";var androidFingerPng=path+\"mini_finger.png\";var helpPng=path+\"help.png\";var isFQG=(rpcData.is_fqg==\"Y\");var showAggr=(rpcData.show_aggr==\"Y\");var fingerPay=rpcData.fingerPay;if(fingerPay==undefined){fingerPay=false}var wearablePay=rpcData.wearablePay;var wearablePayText=\"验证智能设备...\";if(!wearablePay){wearablePay=rpcData.braceletPay;wearablePayText=\"验证手环...\"}var payAction=rpcData.payAct;if(payAction==undefined){payAction=\"/cashier/pay\"}var btnAction=rpcData.btnAction;var btnName=rpcData.btnName;var isNeedArrow=(rpcData.channels||rpcData.switchAcc);var isAndroidFingerPayHuawei=(isAndroid&&fingerPay&&rpcData.fpProtocolType==\"2\");var arrowPaddingRight=\"23px\";if(isAndroid){arrowPaddingRight=\"19px\"}function pressEffectonParent(c,b){var a=b.style.backgroundColor;c.onmousedown=function(){b.style.transition=0;b.style.backgroundColor=\"#e5e5e5\"};c.onmouseup=function(){b.style.backgroundColor=a;b.style.transition=0.475}}function createItem(j,m,o){var c=getById(\"mainBody\");var i=create(\"div\");i.className=\"common_padding_left_right\";var a=create(\"div\");a.className=\"common_immersion_item\";i.appendChild(a);var k=create(\"div\");k.className=\"common_immersion_item_left_box\";a.appendChild(k);if(o==\"payment\"||o==\"account\"){pressEffectonParent(a,i);pressEffect(i)}var p=create(\"label\");p.className=\"common_immersion_item_left_text\";k.appendChild(p);p.innerText=j;var f=create(\"div\");f.className=\"common_immersion_item_center_box\";f.style.webkitBoxPack=\"end\";a.appendChild(f);var n=create(\"div\");n.className=\"common_immersion_item_center_text_box\";var g=create(\"label\");g.className=\"common_immersion_item_center_text\";g.innerText=m;g.id=o;n.appendChild(g);f.appendChild(n);if(o==\"product\"){a.style.cssText=\"height:auto;width:100%;\";i.className=\"common_immersion_item\";i.style.cssText=\"text-align:right;-webkit-box-orient:vertical;-webkit-box-pack:center;-webkit-box-align:end;\";if(rpcData.productDetail){var l=create(\"label\");l.innerText=rpcData.productDetail;l.className=\"common_immersion_item_center_text cashier_pre_confirm_1\";i.appendChild(l);if(isNeedArrow){l.style.paddingRight=arrowPaddingRight}}}if(o==\"payment\"&&rpcData.redPoint){var d=create(\"div\");d.className=\"cashier_pre_confirm_7\";d.style.marginLeft=\"10px\";f.appendChild(d)}if((o==\"payment\"&&rpcData.channels)||(o==\"account\"&&rpcData.switchAcc)){var h=create(\"div\");h.style.width=arrowPaddingRight;h.style.textAlign=\"right\";f.appendChild(h);var e=create(\"img\");e.src=\"indicatior\";e.style.display=\"none\";e.id=o+\"_indicatior\";h.appendChild(e);var d=create(\"img\");d.src=arrowRightPng;d.id=o+\"_arrow\";h.appendChild(d)}else{if(isNeedArrow){var d=create(\"div\");d.style.width=arrowPaddingRight;f.appendChild(d)}}c.appendChild(i);var b=create(\"div\");b.className=\"common_padding_left_right\";var q=create(\"div\");q.className=\"common_1px_line\";b.appendChild(q);c.appendChild(b);return a}function createDetailItem(g,i,c){var d=getById(\"mainBody\");var h=create(\"div\");h.className=\"common_padding_left_right common_immersion_item_detail\";var f=create(\"div\");f.className=\"common_immersion_item_detail_left_box\";h.appendChild(f);var e=create(\"label\");e.className=\"common_immersion_item_detail_left_text\";f.appendChild(e);e.innerText=g;if(i==\"\"){h.className=\"common_padding_left_right info_text_margin\"}var a=create(\"div\");a.className=\"common_immersion_item_detail_right_box\";h.appendChild(a);var b=create(\"label\");b.className=\"common_immersion_item_detail_right_text\";a.appendChild(b);b.innerText=i;if(isNeedArrow){a.style.paddingRight=arrowPaddingRight}d.appendChild(h);if(c){h.className=\"common_padding_left_right cashier_pre_confirm_2\";b.className=\"common_theme_text_color\";h.onclick=function(){ant.submit({action:{name:\"/cashier/toSelectDiscount\"}})}}}function fingerPayHuawei(){var a={action:{name:rpcData.authAction}};ant.asyncSubmit(a,function(b){if(b.status==\"0001\"){getById(\"fingerFextLeft\").innerText=\"支付成功\";getById(\"fingerTextRight\").style.display=\"none\"}else{if(b.status==\"0002\"){getById(\"fingerFextLeft\").innerText=\"正在验证指纹...\";getById(\"fingerTextRight\").style.display=\"none\"}else{if(b.status==\"0003\"){getById(\"fingerFextLeft\").innerText=\"正在付款...\";getById(\"fingerTextRight\").style.display=\"none\"}else{if(b.status==\"0004\"){gotoPwdArea()}else{if(b.status==\"0005\"){getById(\"fingerFextLeft\").innerText=\"指纹校验失败，请重试\";getById(\"fingerTextRight\").style.display=\"none\"}}}}}})}function showProtocol(){var a=[{text:\"芝麻信用服务协议\",url:\"https://ds.alipay.com/credit/infoContract.htm\"},{text:\"蚂蚁花呗用户服务合同\",url:\"https://ds.alipay.com/credit/hbContract.htm\"}];showProtocolList(a)}function init(){getById(\"leftIcon\").src=closePng;getById(\"androidFingerPng\").src=androidFingerPng;getById(\"helpPng\").src=helpPng;if(showAggr){getById(\"protocol\").style.display=\"block\"}if(isFQG){getById(\"btnConfirm\").innerText=\"确认分期\"}if(btnAction!=undefined){getById(\"btnConfirm\").innerText=btnName}if(rpcData.product){var g=\"订单信息\";if(rpcData.order){g=rpcData.order}createItem(g,rpcData.product,\"product\")}if(rpcData.account){var k=createItem(\"支付宝账户\",rpcData.account,\"account\");if(rpcData.switchAcc){k.onclick=function(){getById(\"account_indicatior\").style.display=\"inline-block\";getById(\"account_arrow\").style.display=\"none\";var i={action:{name:\"/cashier/switchAccount\",loadtxt:\"\"}};ant.asyncSubmit(i,function(l){getById(\"account_indicatior\").style.display=\"none\";getById(\"account_arrow\").style.display=\"inline-block\"})}}}if(rpcData.payTool){var k=createItem(\"付款方式\",rpcData.payTool,\"payment\");if(rpcData.channels){k.onclick=function(){getById(\"payment_indicatior\").style.display=\"inline-block\";getById(\"payment_arrow\").style.display=\"none\";var i={action:{name:\"/cashier/switchChannel\",loadtxt:\"\"}};i.param={};i.param[\"fromCashier\"]=true;ant.asyncSubmit(i,function(l){getById(\"payment_indicatior\").style.display=\"none\";getById(\"payment_arrow\").style.display=\"inline-block\"})}}}var c=getById(\"mainBody\");var f=create(\"div\");f.style.height=\"12.5px\";c.appendChild(f);if(isNeedArrow){if(isAndroid){getById(\"payMore\").style.paddingRight=\"34px\"}else{getById(\"payMore\").style.paddingRight=\"38px\"}}for(var d=0;rpcData.detail&&d<rpcData.detail.length;d++){var b=rpcData.detail[d];createDetailItem(b.info,b.price,false)}if(rpcData.selDis){createDetailItem(\" \",\"更换优惠\",true)}if(rpcData.gonggao){var j=getById(\"body\").offsetHeight;j=j+36;var e=create(\"marquee\");e.className=\"common_immersion_marquee\";e.style.paddingLeft=\"3px\";e.innerText=rpcData.gonggao;getById(\"body\").insertBefore(e,getById(\"commonImmersionTitle\"));getById(\"body\").style.height=j+\"px\"}getById(\"totalCost\").innerText=rpcData.cost+\"元\";if(isAndroidFingerPayHuawei){getById(\"container\").style.display=\"none\";getById(\"androidFinger\").style.display=\"-webkit-box\";fingerPayHuawei();document.onreload=function(i){fingerPayHuawei()}}if(!isFlybird){getById(\"body\").style.height=\"400px\"}var a=getById(\"flexBody\").offsetHeight;var h=getById(\"payMore\").offsetHeight;getById(\"payMain\").style.maxHeight=(a-h).toString()+\"px\"}function gotoPwdArea(){var a={};a.action={name:\"loc:bnvb\"};a.param={};a.param[\"data\"]={};a.param[\"data\"][\"spasswordPay\"]=rpcData.spasswordPay;if(isAndroidFingerPayHuawei||wearablePay){}else{a.param[\"data\"][\"payOrder\"]=true}a.param[\"data\"][\"nextAction\"]=payAction;a.param[\"data\"][\"pwdTip\"]=rpcData.pwdTip;a.param[\"tplid\"]=\"QUICKPAY@open-pwd-check\";a.param[\"tpl\"]=rpcData.tpl;ant.submit(a)}function onPaySuccess(){var b=getById(\"text\");getById(\"gifImg\").src=successNoRepeatGif;getById(\"container\").className=\"cashier_pre_confirm_6\";b.style.opacity=0.2;var a=setTimeout(function(){b.innerText=\"付款成功\";b.style.opacity=1},500)}function realPay(){if(rpcData.npwdPay){var b=getById(\"confirm\");var a=getById(\"gifImg\");b.style.marginLeft=\"-50%\";a.src=loadingGif;var c={action:{name:payAction,loadtxt:\"\"}};c.action[\"neec\"]=\"6004\";ant.asyncSubmit(c,function(d){if(d.status==\"0001\"){onPaySuccess()}else{if(d.status==\"0002\"){b.style.marginLeft=\"0px\";a.src=\"\"}else{if(d.status==\"0006\"){b.style.marginLeft=\"0px\";a.src=\"\"}else{if(d.status==\"0000\"){b.style.marginLeft=\"0px\";a.src=\"\"}}}}})}else{if(fingerPay||wearablePay){var c={action:{name:rpcData.authAction,loadtxt:\"\"}};if(wearablePay){getById(\"confirm\").style.marginLeft=\"-50%\";getById(\"text\").innerText=wearablePayText;getById(\"gifImg\").src=loadingGif}ant.asyncSubmit(c,function(e){var d=e.status.substr(-2);if(d==\"01\"){onPaySuccess()}else{if(d==\"03\"){getById(\"confirm\").style.marginLeft=\"-50%\";getById(\"gifImg\").src=loadingGif;getById(\"text\").innerText=\"正在付款...\"}else{if(d==\"09\"){ant.submit({action:{name:\"loc:exit\"}})}else{if(d==\"00\"){getById(\"confirm\").style.marginLeft=\"0%\";getById(\"gifImg\").src=\"\";getById(\"text\").innerText=\"正在付款...\"}else{if(d==\"04\"||d==\"05\"){if(isIOS){getById(\"confirm\").style.marginLeft=\"0%\";getById(\"gifImg\").src=\"\";getById(\"text\").innerText=\"正在付款...\"}gotoPwdArea()}}}}}})}else{gotoPwdArea()}}}function onPay(){if(btnAction!=undefined){var b={};b.action={name:btnAction};ant.submit(b);return}if(rpcData.chargeMsg){var a={title:\"\",message:rpcData.chargeMsg,okButton:\"确定\",cancelButton:\"取消\"};ant.confirm(a,function(c){if(c.ok){realPay()}})}else{realPay()}}function onBack(){exitConfirm(\"确定要放弃付款？\")}function onMouseDown(){getById(\"container\").style.transition=0;getById(\"container\").style.backgroundColor=\"#00a3d2\"}function onMouseUp(){getById(\"container\").style.backgroundColor=\"#00aaee\";getById(\"container\").style.transition=0.475}function gotoHelp(){ant.submit({action:{name:\"loc:openweb('https://ds.alipay.com/help/index.htm?version=9.0', '帮助')\"}})};"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"href":"com.alipay.android.app/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"children":[{"tag":"text","text":".move_ani {transition:0.9s; height:100%; display:inline-block; width:50%; }\n.success_ani {transition:0.475s;}\n.info_text_margin {\n    display:-webkit-box;\n    -webkit-box-align:center;\n    margin-top:-2.5px;\n    margin-bottom:16px;\n}"}],"tag":"style"}],"tag":"head"},{"children":[{"children":[{"children":[{"id":"leftIcon","tag":"img"}],"css":"common_immersion_title_left_box","onclick":"onBack()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"付款详情"}],"css":"common_immersion_title_center_text","id":"title","tag":"label"}],"css":"common_immersion_title_center_box","tag":"div"},{"children":[{"id":"helpPng","onclick":"gotoHelp()","style":"padding-top:10px; padding-bottom:10px; padding-left:10px;","tag":"img"}],"css":"common_immersion_title_right_box","tag":"div"}],"css":"common_immersion_title_box","id":"commonImmersionTitle","tag":"div"},{"css":"common_1px_title_line","tag":"div"},{"children":[{},{"children":[{"children":[{"children":[{},{"id":"mainBody","tag":"div"}],"css":"common_immersion_main","id":"payMain","tag":"div"},{"children":[{"children":[{"tag":"text","text":"需付款"}],"css":"common_p_reset cashier_pre_confirm_3","tag":"p"},{"css":"common_immersion_title_center_box","tag":"div"},{"css":"common_p_reset cashier_pre_confirm_4","id":"totalCost","tag":"p"}],"css":"common_padding_left_right","id":"payMore","style":"display:-webkit-box; -webkit-box-align:center;padding-top:15px;","tag":"div"}],"id":"flexBody","style":"-webkit-box-flex:1.0;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"同意"}],"css":"common_full_bottom_text","id":"agree","style":"padding-right:5px;","tag":"label"},{"children":[{"tag":"text","text":"服务协议"}],"css":"common_full_bottom_text common_theme_text_color","id":"protocol","onclick":"showProtocol()","tag":"label"}],"css":"common_padding_left_right","id":"protocol","style":"display:none;text-align:center;padding-top:5px;","tag":"div"},{"children":[{"children":[{"children":[{"children":[{"children":[{"tag":"text","text":"确认付款"}],"id":"btnConfirm","style":"color:#ffffff; font-size:20px;","tag":"label"}],"style":"height:100%; display:-webkit-box; -webkit-box-align:center; -webkit-box-pack:center;","tag":"div"}],"css":"move_ani","id":"confirm","onclick":"onPay()","onmousedown":"onMouseDown()","onmouseup":"onMouseUp()","tag":"div"},{"children":[{"children":[{"children":[{"id":"gifImg","style":"width:24px; height:24px; padding-right:8px;","tag":"img"}],"css":"success_ani","tag":"div"},{"children":[{"children":[{"tag":"text","text":"正在付款"}],"css":"success_ani","id":"text","style":"color:#ffffff; font-size:20px;","tag":"label"}],"css":"success_ani","tag":"div"}],"style":"height:100%; display:-webkit-box; -webkit-box-align:center; -webkit-box-pack:center;","tag":"div"}],"css":"move_ani","id":"pay","tag":"div"}],"style":"width:200%; height:100%;","tag":"div"}],"css":"success_ani common_button_main_bgColor cashier_pre_confirm_5","id":"container","tag":"div"},{},{"children":[{"children":[{"id":"androidFingerPng","tag":"img"}],"style":"text-align:center;padding-bottom:10px;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"请验证指纹或者"}],"id":"fingerFextLeft","style":"font-size:13px; color:#999999;","tag":"label"},{"children":[{"tag":"text","text":"输入密码"}],"css":"common_theme_text_color","id":"fingerTextRight","onclick":"gotoPwdArea()","style":"font-size:13px; padding-left:5px;","tag":"label"}],"style":"text-align:center;","tag":"div"}],"id":"androidFinger","style":"width:100%; height:120px; display:none; -webkit-box-orient:vertical; -webkit-box-align:center; -webkit-box-pack:center;","tag":"div"}],"id":"cashier","style":"height:100%; display:-webkit-box; -webkit-box-orient:vertical;","tag":"div"}],"style":"-webkit-box-flex:1.0;","tag":"div"}],"css":"common_immersion_body","id":"body","onkeydown":"onBack();","onload":"init()","style":"","tag":"body"}],"tag":"html"},"format":"JSON","name":"cashier-pre-confirm","publishVersion":"150806","tag":"QUICKPAY","time":"0026","tplId":"QUICKPAY@cashier-pre-confirm","tplVersion":"5.0.1"}