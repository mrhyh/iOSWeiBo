{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"content":"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui","name":"viewport","tag":"meta"},{"src":"cashier-discount-select.js","tag":"script"},{"children":[{"tag":"text","text":"var is_flybird=navigator.userAgent.toLowerCase().indexOf(\"flybird\")>=0;var is_android=navigator.userAgent.toLowerCase().indexOf(\"android\")>=0;var path=is_android?\"com.alipay.android.app/\":\"AlipaySDK.bundle/\";var is_ios=!is_android;var close_png=path+\"close.png\";var gou_png=path+\"gou.png\";var arrow_left_png=path+\"arrow_left.png\";var isShowSubmitBtn=(flybird.rpcData.scene==\"offline_tb\");var discount_array=new Array();var discount_more_array=new Array();var discount_init_index=\"\";function getDiscount_index(){var a=\"\";for(var b=0;b<discount_array.length;b++){if(discount_array[b].src!=\"\"){a+=\"Y\"}else{a+=\"N\"}}for(var b=0;b<discount_more_array.length;b++){if(discount_more_array[b].checked){a+=\"Y\"}else{a+=\"N\"}}return a}function createDiscountItem(h,d){var g=document.getElementById(\"discount\");var f=document.createElement(\"div\");f.className=\"common_immersion_item common_padding_left_right\";var e=document.createElement(\"div\");e.className=\"common_immersion_item_center_box\";f.appendChild(e);var i=document.createElement(\"label\");i.className=\"common_immersion_item_center_text\";i.innerText=h.name;i.style.color=\"#000000\";e.appendChild(i);if(h.checked_more!=undefined){var c;if(is_flybird){c=document.createElement(\"checkbox\");c.className=\"common_checkbox\"}else{c=document.createElement(\"input\");c.type=\"checkbox\"}c.checked=h.checked_more;f.appendChild(c);discount_more_array.push(c);f.onclick=function(){c.checked=!c.checked};if(c.checked){discount_init_index+=\"Y\"}else{discount_init_index+=\"N\"}}else{var b=document.createElement(\"img\");f.appendChild(b);discount_array.push(b);if(h.checked){b.src=gou_png;discount_init_index+=\"Y\"}else{discount_init_index+=\"N\"}f.onclick=function(){if(b.src!=\"\"){b.src=\"\";return}for(var k=0;k<discount_array.length;k++){discount_array[k].src=\"\"}b.src=gou_png}}g.appendChild(f);var j=document.createElement(\"div\");j.className=\"common_1px_line\";var a=document.createElement(\"div\");a.className=\"common_padding_left_right\";a.appendChild(j);g.appendChild(a);return f}function onback(){if(isShowSubmitBtn){ant.submit({action:{name:\"loc:exit\"}})}else{var a=getDiscount_index();if(a!=discount_init_index){submit()}else{ant.submit({action:{name:\"loc:back\"}})}}}function submit(){var d={action:{name:\"/cashier/selectDiscount\"}};d.param={};var b=getDiscount_index();for(var c=0;c<b.length;c++){if(flybird.rpcData.discounts[c][\"checked_more\"]==undefined){if(discount_array[c].src!=\"\"){d.param[\"discount_option_value\"]=flybird.rpcData.discounts[c].value}}else{var a=c-discount_array.length;if(discount_more_array[a].checked){d.param[flybird.rpcData.discounts[c].value]=\"true\"}else{d.param[flybird.rpcData.discounts[c].value]=\"false\"}}}ant.submit(d);discount_init_index=getDiscount_index()}function init(){document.getElementById(\"close_png\").src=close_png;for(var a=0;flybird.rpcData.discounts&&a<flybird.rpcData.discounts.length;a++){createDiscountItem(flybird.rpcData.discounts[a],a)}if(isShowSubmitBtn){document.getElementById(\"close_png\").src=close_png}else{document.getElementById(\"submit_area\").style.display=\"none\";document.getElementById(\"close_png\").src=arrow_left_png}};"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"href":"com.alipay.android.app/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"tag":"style"}],"tag":"head"},{"children":[{"children":[{"children":[{"id":"close_png","tag":"img"}],"css":"common_immersion_title_left_box","onclick":"onback()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"选择优惠"}],"css":"common_immersion_title_center_text","id":"title","tag":"label"}],"css":"common_immersion_title_center_box","tag":"div"},{"children":[{"id":"help_png","tag":"img"}],"css":"common_immersion_title_right_box","tag":"div"}],"css":"common_immersion_title_box","tag":"div"},{"css":"common_1px_title_line","tag":"div"},{"children":[{},{"id":"discount","tag":"div"}],"css":"","id":"main_body","style":"-webkit-box-flex:1.0; overflow:scroll;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"确定"}],"css":"common_button_main","onclick":"submit()","tag":"button"}],"id":"submit_area","style":"height:43px; padding:15px;","tag":"div"}],"css":"common_immersion_body","id":"body","onkeydown":"onback();","onload":"init()","tag":"body"}],"tag":"html"},"format":"JSON","name":"cashier-discount-select","publishVersion":"150702","tag":"QUICKPAY","time":"0004","tplId":"QUICKPAY@cashier-discount-select","tplVersion":"5.0.0"}