{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"content":"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui","name":"viewport","tag":"meta"},{"src":"common.js","tag":"script"},{},{"src":"AlipaySDK.bundle/common.js","tag":"script"},{"children":[{"tag":"text","text":"var navBackPng=path+\"back.png\";var infoPng=path+\"info.png\";var cvvDlgPng=path+\"cvv.png\";var valDlgPngAndroid=path+\"mini_expiry_date_card.png\";var valDlgPngIOS=path+\"com_data.png\";var phoneDlgPng=path+\"phone_info.png\";var needInput=rpcData.needinput;var protocols=rpcData.protocols;var cardName=needInput.cardname;var userName=needInput.username;var certNo=needInput.certno;var certType=needInput.certtype;var bankMobile=needInput.bankmobile;var userNameDisplay=userName&&userName.display;var certNoDisplay=certNo&&certNo.display;var certTypeDisplay=certNoDisplay&&certType&&certType.display;var bankMobileDisplay=bankMobile&&bankMobile.display;var disabledInput={};disabledInput.cvv2=!rpcData.cvv2;disabledInput.validate=!rpcData.validate;disabledInput.userName=(!userNameDisplay)||userName.disable;disabledInput.certNo=(!certNoDisplay)||certNo.disable;disabledInput.bankMobile=(!bankMobileDisplay)||bankMobile.disable;var userNameDefault=(userName&&userName.value)?userName.value:\"\";var certNoDefault=(certNo&&certNo.value)?certNo.value:\"\";var certTypeDefault=(certType&&certType[\"default\"])?certType[\"default\"]:\"\";var bankMobileDefault=(bankMobile&&bankMobile.value)?bankMobile.value:\"\";var certTypeTextArray=new Array();var certTypeValueArray=new Array();var useOrange=(rpcData.color==\"orange\");var infoPngOrange=path+\"info_orange.png\";function init(){if(isAndroid){getById(\"iosNav\").style.display=\"none\";getById(\"navBackImgAndroid\").src=navBackPng}else{if(!isIOS){getById(\"androidNav\").style.display=\"none\"}getById(\"navBackImg\").src=navBackPng}getById(\"cvvInfo\").src=infoPng;getById(\"validateInfo\").src=infoPng;getById(\"phoneInfo\").src=infoPng;if(cardName&&cardName.display){getById(\"bankName\").innerText=rpcData.bankname;getById(\"cardType\").innerText=rpcData.isCredit?\"信用卡\":\"储蓄卡\"}else{getById(\"cardNameArea\").style.display=\"none\"}if(rpcData.cvv2&&rpcData.validate){var e=\"common_1px_line common_line_left_margin\";getById(\"centerLineTop\").className=e;getById(\"centerLineBottom\").className=e}else{if(rpcData.cvv2){getById(\"validateArea\").style.display=\"none\"}else{if(rpcData.validate){getById(\"cvvArea\").style.display=\"none\"}else{getById(\"validateArea\").style.display=\"none\";getById(\"cvvArea\").style.display=\"none\";getById(\"commonCellFooterEmptyBox\").style.display=\"none\"}}}if(userNameDisplay){var b=getById(\"userName\");b.value=userNameDefault;b.disabled=!!disabledInput.userName}else{getById(\"userNameArea\").style.display=\"none\"}if(certNoDisplay){var a=getById(\"certNo\");a.value=certNoDefault;a.disabled=!!disabledInput.certNo}else{getById(\"certNoArea\").style.display=\"none\"}if(bankMobileDisplay){var d=getById(\"bankMobile\");d.value=bankMobileDefault;d.disabled=!!disabledInput.bankMobile}else{getById(\"bankMobileArea\").style.display=\"none\"}var f=getById(\"certType\");f.style.marginLeft=-f.offsetWidth;if(certTypeDisplay){var g=certType.value;var f=getById(\"certType\");if(g){for(var h in g){var c=document.createElement(\"option\");c.text=h;c.value=g[h];certTypeTextArray.push(c.text);certTypeValueArray.push(c.value);if(c.value==certTypeDefault){c.selected=true;f.selectedIndex=certTypeTextArray.length-1;getById(\"certNo\").placeholder=\"请输入\"+h+\"号码\"}f.options.add(c)}}else{getById(\"certNo\").placeholder=\"请输入身份证号码\"}}else{getById(\"certTypeArea\").style.display=\"none\"}if(useOrange){getById(\"submit\").className=\"btn_orange\";getById(\"agree\").style.color=\"#999999\";getById(\"protocol\").style.color=\"#000\";getById(\"certTypeLabel\").style.color=\"#ff5500\";getById(\"cvvInfo\").src=infoPngOrange;getById(\"validateInfo\").src=infoPngOrange;getById(\"phoneInfo\").src=infoPngOrange}getById(\"protocol\").style.paddingLeft=\"3px\";updateSubmitState()}function showProtocol(){var b=new Array();for(var a=0;a<protocols.length;a++){b.push(protocols[a][\"text\"])}ant.actionSheet({btns:b,cancelBtn:\"取消\"},function(c){ant.submit({action:{name:\"loc:openweb('\"+protocols[c.index][\"url\"]+\"','\"+protocols[c.index][\"text\"]+\"')\"}})})}function checkInput(a,b){if(a.value.length){b.style.display=\"none\"}else{b.style.display=\"inline-block\"}}function updateSubmitState(){var a=document.getElementsByTagName(\"input\");var d=false;for(var b=0;b<a.length;b++){if(disabledInput[a[b].id]){continue}if(!a[b].value){d=true;break}}getById(\"submit\").disabled=d;var f=getById(\"cvv2\");if(f.value.length>=3){f.blur()}checkInput(f,getById(\"cvvInfo\"));var e=getById(\"validate\");checkInput(e,getById(\"validateInfo\"));var c=getById(\"bankMobile\");checkInput(c,getById(\"phoneInfo\"))}function hideKeyboard(){var a=document.querySelectorAll(\"input\");for(var b=0;b<a.length;b++){a[b].blur()}}function submit(){hideKeyboard();var c={};if(rpcData.isCredit){c.action={name:\"/card/sign\",neec:\"6004\",host:rpcData.pci_url,https:true,enctype:\"application/x-www-form-urlencoded\",request_param:\"requestData\"}}else{c.action={name:\"/card/sign\",neec:\"6004\"}}c.action[\"params\"]={cardtype:rpcData.cardtype,bankcode:rpcData.bankcode,ccdctoken:rpcData.ccdctoken,hidden_card_no:rpcData.hidden_card_no};c.param={};if(userNameDisplay){var k=getById(\"userName\");if(k&&k.value!=userNameDefault){c.param[\"username\"]=k.value}}var j=certTypeDefault;if(certTypeDisplay){var h=getById(\"certType\");if(h){j=certTypeValueArray[h.selectedIndex]}if(j!=certTypeDefault){c.param[\"certtype\"]=j}}if(certNoDisplay){var i=getById(\"certNo\");if(i&&i.value!=certNoDefault){c.param[\"certno\"]=i.value;if(j==\"A\"){var a=\"(^\\\\d{15}$)|(^\\\\d{17}([0-9]|X)$)\";var f=i.value;var b=f.match(a);if(b==undefined){ant.toast({text:\"请输入正确的身份证号码\",type:\"fail\"},function(){i.focus()});return}}}}if(bankMobileDisplay){var d=getById(\"bankMobile\");if(d&&d.value!=bankMobileDefault){c.param[\"bankmobile\"]=d.value;var a=\"^1\\\\d{10}$\";var f=d.value;var b=f.match(a);if(b==undefined){ant.toast({text:\"请输入正确的手机号码\",type:\"fail\"},function(){d.focus()});return}}}if(rpcData.cvv2){var e=getById(\"cvv2\");if(e){c.param[\"cvv2\"]=e.value}}if(rpcData.validate){var g=getById(\"validate\");if(g){c.param[\"validate\"]=g.value}}ant.asyncSubmit(c,function(l){})}function onClickCvv(){getById(\"dlgImg\").src=cvvDlgPng;getById(\"dlgText\").innerText=\"安全码是打印在信用卡背面签名区域的一组数字，一般是后3位或者4位数字。\";getById(\"dlgTitle\").innerText=\"安全码说明\";getById(\"dlg\").showModal()}function onClickValidate(){getById(\"dlgImg\").src=isAndroid?valDlgPngAndroid:valDlgPngIOS;getById(\"dlgText\").innerText=\"有效期是打印在信用卡正面卡号下方，标准格式为月份在前，年份在后的一串数字。\";getById(\"dlgTitle\").innerText=\"有效期说明\";getById(\"dlg\").showModal()}function onClickPhone(){getById(\"dlgImg\").src=phoneDlgPng;getById(\"dlgText\").innerText=\"银行预留的手机号是办理该银行卡时所填写的手机号码。\\n\\n没有预留、手机号忘记或者已停用，请联系银行客服更新处理。\";getById(\"dlgTitle\").innerText=\"手机号说明\";getById(\"dlg\").showModal()}function onBack(){hideKeyboard();ant.submit({action:{name:\"loc:back\"}})}function onSelectChange(){var c=getById(\"certType\");var b=c.selectedIndex;var a=getById(\"certNo\").placeholder;var d=\"请输入\"+certTypeTextArray[b]+\"号码\";getById(\"certNo\").placeholder=d;if(a!=d){getById(\"certNo\").value=\"\";updateSubmitState()}};"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"href":"com.alipay.android.app/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"tag":"style"}],"tag":"head"},{"children":[{},{"children":[{"children":[{"children":[{"css":"common_nav_left_img","id":"navBackImg","tag":"img"},{"children":[{"tag":"text","text":"返回"}],"css":"common_nav_left_text","tag":"p"}],"css":"common_nav_left_box","onclick":"onBack()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"填写银行卡信息"}],"css":"common_nav_center_text","tag":"label"}],"css":"common_nav_center_box","tag":"div"},{"css":"common_nav_right_box","tag":"div"}],"css":"common_nav_box","id":"iosNav","tag":"div"},{"children":[{"children":[{"children":[{"css":"common_nav_left_img_android","id":"navBackImgAndroid","tag":"img"}],"css":"common_nav_back_box_android","onclick":"onBack()","tag":"div"},{"css":"common_nav_line_android","tag":"div"},{"children":[{"tag":"text","text":"添加银行卡"}],"css":"common_nav_center_text common_p_reset","tag":"label"}],"css":"common_nav_title_android","id":"navBack","tag":"div"},{"children":[{"id":"navRightImgAndroid","style":"","tag":"img"}],"css":"common_nav_right_box_android","tag":"div"}],"css":"common_nav_box_android","id":"androidNav","tag":"div"}],"tag":"nav"},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{},{"children":[{"children":[{"children":[{"tag":"text","text":"卡类型"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_left_box_text","id":"bankName","tag":"label"},{"css":"common_cell_left_box_text","id":"cardType","style":"margin-left:20px;","tag":"label"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","id":"cardName","tag":"div"},{"css":"common_1px_line","tag":"div"},{"css":"common_cell_footer_empty_box","tag":"div"}],"id":"cardNameArea","tag":"div"},{},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"安全码"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"cvv2","oninput":"updateSubmitState()","placeholder":"卡背面末三位数字","tag":"input","type":"num"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"cvvInfo","onclick":"onClickCvv()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","id":"centerLineTop","tag":"div"}],"id":"cvvArea","style":"background-color:#ffffff;","tag":"div"},{},{"children":[{"css":"common_1px_line","id":"centerLineBottom","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"有效期"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"validate","oninput":"updateSubmitState()","placeholder":"月份/年份","tag":"input","type":"month"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"validateInfo","onclick":"onClickValidate()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"}],"id":"validateArea","style":"background-color:#ffffff; margin-top:-1;","tag":"div"},{"css":"common_cell_footer_empty_box","id":"commonCellFooterEmptyBox","tag":"div"},{},{"children":[{"css":"common_1px_line","id":"existingItem","tag":"div"},{},{"children":[{"children":[{"children":[{"children":[{"tag":"text","text":"姓名"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"userName","oninput":"updateSubmitState()","tag":"input"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"children":[{"css":"common_1px_line common_line_left_margin","tag":"div"}],"css":"common_cell_animation","style":"background-color:#ffffff;","tag":"div"}],"id":"userNameArea","tag":"div"},{},{"children":[{"children":[{"children":[{"children":[{"tag":"text","text":"证件号"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"certNo","oninput":"updateSubmitState()","placeholder":"","tag":"input","type":"NumbersAndPunctuation"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"},{},{"children":[{"children":[{"tag":"text","text":"信息加密处理，仅用于银行验证"}],"css":"common_cell_footer_text","tag":"label"},{"children":[{"children":[{"tag":"text","text":"选择证件类型"}],"css":"common_cell_footer_text common_theme_text_color","id":"certTypeLabel","tag":"label"},{"id":"certType","oninput":"onSelectChange()","style":"font-size:12px;","tag":"select"}],"id":"certTypeArea","style":"-webkit-box-flex:1.0; text-align:right;","tag":"div"}],"css":"common_cell_box common_cell_footer_box","tag":"div"}],"id":"certNoArea","tag":"div"},{"children":[{"css":"common_1px_line","tag":"div"},{},{"children":[{"children":[{"children":[{"tag":"text","text":"手机号"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"bankMobile","oninput":"updateSubmitState();","placeholder":"请输入银行预留手机号","tag":"input","type":"num"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"phoneInfo","onclick":"onClickPhone()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"}],"id":"bankMobileArea","tag":"div"},{},{"children":[{"children":[{"tag":"text","text":"同意"}],"css":"common_cell_footer_text","id":"agree","tag":"label"},{"children":[{"children":[{"tag":"text","text":"服务协议"}],"css":"common_cell_footer_text common_theme_text_color","id":"protocol","onclick":"showProtocol()","tag":"label"}],"tag":"div"}],"css":"common_cell_box common_cell_footer_box","tag":"div"}],"tag":"div"},{},{"children":[{"children":[{"tag":"text","text":"下一步"}],"css":"common_button_main","disabled":"true","id":"submit","onclick":"submit()","tag":"button"}],"css":"common_padding_left_right common_padding_bottom","tag":"div"}],"css":"common_full_main","id":"mainBody","tag":"div"},{"children":[{"id":"dlgTitle","style":"text-align:center; font-size:17px; color:#000000; font-weight:bold; padding:10px;","tag":"p"},{"children":[{"id":"dlgImg","tag":"img"}],"style":"text-align:center;","tag":"div"},{"id":"dlgText","style":"font-size:14px; color:#000000; padding:15px;","tag":"p"},{"css":"common_1px_line","tag":"div"},{"children":[{"tag":"text","text":"知道了"}],"css":"common_theme_text_color","id":"btn_main","onclick":"getById('dlg').close()","style":"width:100%; height:50px; font-size:20px;","tag":"button"}],"id":"dlg","style":"width:300px; border:0px; background-color:#FFFFFF; border-radius:8px; padding:0px;","tag":"dialog"}],"css":"common_full_body","id":"body","onkeydown":"onBack();","onload":"init()","tag":"body"}],"tag":"html"},"format":"JSON","name":"card-detail","publishVersion":"150730","tag":"QUICKPAY","time":"0026","tplId":"QUICKPAY@card-detail","tplVersion":"5.0.1"}