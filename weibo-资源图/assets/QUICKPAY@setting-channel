{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"src":"setting-channel.js","tag":"script"},{"children":[{"tag":"text","text":"var is_flybird=navigator.userAgent.toLowerCase().indexOf(\"flybird\")>=0;var is_android=navigator.userAgent.toLowerCase().indexOf(\"android\")>=0;var path=is_android?\"com.alipay.android.app/\":\"AlipaySDK.bundle/\";var nav_right_label=undefined;var item_png=path+\"item.png\";var nav_back_png=path+\"back.png\";var close_png=path+\"close.png\";var fingerPay=flybird.rpcData.fingerPay;var spasswordPay=flybird.rpcData.spasswordPay;var switch_jfb=flybird.rpcData.switch_jfb;var switch_seq=flybird.rpcData.switch_seq;if(switch_seq==undefined){switch_seq=flybird.rpcData.switch_seq=false}if(switch_jfb==undefined){switch_jfb=flybird.rpcData.switch_jfb=false}if(fingerPay==undefined){fingerPay=flybird.rpcData.braceletPay}var holdObj;var y;var arrayObj=new Array();var arrayLine=new Array();var itemObj=new Array();var itemHeight=43;var isEdit=false;function touchDown(b,a){holdObj=b;holdObj.style.transition=\"0s\";holdObj.style.opacity=0.7;holdObj.style.boxShadow=\"0px 3px 12px 4px #000000\";y=event.y;b.style.zIndex=10}function touchUp(){holdObj.style.zIndex=0;holdObj.style.transition=\"0.3s\";holdObj.style.boxShadow=\"\";holdObj.style.opacity=1;holdObj=0;arrayObj.sort(function(d,c){return parseFloat(d.style.top)>parseFloat(c.style.top)?1:-1});for(var a=0;a<arrayObj.length;a++){arrayObj[a].style.top=a*itemHeight+\"px\"}}function adjustItem(b){var a=0;for(var c=0;c<arrayObj.length;c++){if(holdObj!=arrayObj[c]){if(a<b){arrayObj[c].style.top=a*itemHeight+\"px\"}else{arrayObj[c].style.top=(a+1)*itemHeight+\"px\"}a++}}}function touchMove(){if(holdObj){var a=event.y;var c=parseFloat(holdObj.style.top)+a-y;holdObj.style.top=c+\"px\";y=a;var b=Math.floor((c+itemHeight/2)/itemHeight);adjustItem(b)}}function createItem(h,c){var d=document.getElementById(\"seq_area\");var f=document.createElement(\"div\");f.style.height=itemHeight+\"px\";f.style.backgroundColor=\"#ffffff\";f.style.position=\"absolute\";f.style.width=\"100%\";f.style.transition=\"0.3s\";f.style.top=c*itemHeight+\"px\";f.value=c;d.appendChild(f);var j=document.createElement(\"div\");j.className=\"common_1px_line\";f.appendChild(j);var i=document.createElement(\"div\");i.className=\"common_cell\";i.style.backgroundColor=\"rgba(0, 0, 0, 0)\";if(is_flybird){i.style.height=(itemHeight-0.5).toString()+\"px\"}else{i.style.height=(itemHeight-1).toString()+\"px\"}f.appendChild(i);var e=document.createElement(\"div\");e.className=\"common_cell_center_box\";e.style.paddingLeft=\"15px\";i.appendChild(e);var a=document.createElement(\"label\");a.className=\"common_cell_center_box_text\";a.innerText=h;e.appendChild(a);var g=document.createElement(\"div\");g.style.width=\"0.1px\";g.style.transition=\"0.3s\";g.style.textAlign=\"right\";itemObj.push(g);i.appendChild(g);var b=document.createElement(\"img\");b.src=item_png;b.style.padding=\"15px\";b.id=\"drag_handle\";g.appendChild(b);if(!is_android){j=document.createElement(\"div\");j.className=\"common_1px_line\";f.appendChild(j)}b.onmousedown=function(){touchDown(f,j)};if(is_android){b.onmouseup=function(){touchUp()};b.onmousemove=function(){touchMove()}}if(!is_flybird){b.ondragstart=function(){return false}}arrayObj.push(f);arrayLine.push(j)}function update_switch_css(b,d){var c=b.querySelector(\".sw_white\");var a=b.querySelector(\".sw\");if(d){b.style.backgroundColor=\"#4cd864\";c.style.width=\"0px\";c.style.height=\"0px\";c.style.left=\"30px\";a.style.margin=\"0px 0px 0px 21.5px\";a.style.left=\"0px\";a.style.boxShadow=\"\"}else{b.style.backgroundColor=\"#e4e4e4\";c.style.width=\"48px\";c.style.height=\"28px\";c.style.left=\"1.5px\";a.style.margin=\"0px\";a.style.left=\"-46.5px\";a.style.boxShadow=\"2px 3px 8px 2px #e4e4e4\"}}function createSwitch(d,g,f){var c=document.getElementById(d);var e=document.createElement(\"div\");e.id=g;e.className=\"sw_by_css\";e.onclick=f;var b=document.createElement(\"div\");b.className=\"sw_white\";e.appendChild(b);var a=document.createElement(\"div\");a.className=\"sw\";e.appendChild(a);c.appendChild(e);return e}function updateEditState(){for(var b=0;b<itemObj.length;b++){if(isEdit){itemObj[b].style.width=\"50px\"}else{itemObj[b].style.width=\"0.1px\"}}var d=document.getElementById(\"nav_back\");var a=document.getElementById(\"switch_jfb\");var c=document.getElementById(\"switch_seq\");var e=document.getElementById(\"red_default\");if(!is_flybird){a=document.getElementById(\"switch_jfb_css\");c=document.getElementById(\"switch_seq_css\")}if(isEdit){nav_right_label.innerText=\"完成\";a.style.opacity=0;c.style.opacity=0;e.style.opacity=0;d.style.opacity=0}else{nav_right_label.innerText=\"编辑\";a.style.opacity=1;c.style.opacity=1;e.style.opacity=1;d.style.opacity=1}}function onEdit(){if(nav_right_label.style.display==\"none\"){return}isEdit=!isEdit;if(is_android){document.getElementById(\"seq_area\").editMode=isEdit}updateEditState();if(isEdit){var a=document.getElementById(\"seq_area\");a.style.overflow=\"show\"}}function update_seq(){var b=document.getElementById(\"seq_area\");var a=document.getElementById(\"mid_line\");if(switch_seq){if(is_android){b.style.height=(itemHeight*flybird.rpcData.payments.length+1).toString()+\"px\"}else{b.style.height=(itemHeight*arrayObj.length+1).toString()+\"px\"}a.style.display=\"none\"}else{b.style.overflow=\"hidden\";b.style.height=\"0px\";a.style.display=\"block\"}if(!switch_seq){isEdit=false;updateEditState();nav_right_label.style.display=\"none\"}else{nav_right_label.style.display=\"block\"}if(switch_seq){document.getElementById(\"switch_seq_tips\").innerText=\"支付时将按以上顺序优先选择付款方式\"}else{document.getElementById(\"switch_seq_tips\").innerText=\"开关关闭时，系统根据支付习惯自动设置\"}}function onSwitch_seq(){switch_seq=!switch_seq;if(!is_flybird){var a=document.getElementById(\"switch_seq_css\");update_switch_css(a,switch_seq)}update_seq()}function onSwitch_jfb(){switch_jfb=!switch_jfb;if(!is_flybird){var a=document.getElementById(\"switch_jfb_css\");update_switch_css(a,switch_jfb)}}function updateState(){var b=document.getElementById(\"pwd_area\");var a=document.getElementById(\"spwd_area\");if(fingerPay){}else{if(spasswordPay){b.style.display=\"none\";a.style.display=\"block\"}else{b.style.display=\"block\";a.style.display=\"none\"}}}function submit(){var c=getSubmitObj();if(fingerPay){var b={action:{name:flybird.rpcData.authAction}};c.nativeValidate=true;b.param=c;ant.asyncSubmit(b,function(e){var d=e.status.substr(-2);if(d==\"04\"||d==\"05\"){fingerPay=false;openDlg()}else{if(d==\"09\"){ant.submit({action:{name:\"loc:back\"}})}}})}else{if(spasswordPay){var a=document.querySelector(\"#spwd\").encryptValue;if(!a){a=document.querySelector(\"#spwd\").value}c.spwd=a}else{c.pwd=document.getElementById(\"pwd\").value}c.encryptType=\"RSA\";var b={action:{name:\"/setting/save\"}};b.param=c;ant.asyncSubmit(b,function(d){openDlg()});closeDlg()}}function onPwdInput(){var a=document.getElementById(\"pwd\").value;if(a.length>0){document.getElementById(\"btn_main\").disabled=false}else{document.getElementById(\"btn_main\").disabled=true}}function onSpwdInput(){var a=document.getElementById(\"spwd\").value;if(a.length>=6){submit()}}function getSubmitObj(){var d={};if(switch_seq!=flybird.rpcData.switch_seq){d.switch_seq=switch_seq}if(switch_jfb!=flybird.rpcData.switch_jfb){d.switch_jfb=switch_jfb}if(switch_seq){var c=false;var a=\"\";if(is_android){a=document.getElementById(\"seq_area\").value;if(a.length>0){c=true}}else{for(var b=0;b<arrayObj.length;b++){if(b!=arrayObj[b].value){c=true}a+=arrayObj[b].value;a+=\" \"}}if(c){d.channel=a}}return d}function inputSetKeyboardState(a){if(spasswordPay){if(a==\"focus\"){document.getElementById(\"spwd\").focus()}else{document.getElementById(\"spwd\").blur()}}else{if(a==\"focus\"){document.getElementById(\"pwd\").focus()}else{document.getElementById(\"pwd\").blur()}}}function onBack(){var a=getSubmitObj();if(Object.keys(a).length===0){ant.submit({action:{name:\"loc:back\"}});return}if(fingerPay){submit()}else{openDlg()}}function openDlg(){updateState();document.getElementById(\"dlg\").showModal();inputSetKeyboardState(\"focus\")}function closeDlg(){document.getElementById(\"dlg\").close();inputSetKeyboardState(\"blur\");document.getElementById(\"pwd\").value=\"\";document.getElementById(\"spwd\").value=\"\";document.getElementById(\"btn_main\").disabled=true}function oncloseDlg(){closeDlg();ant.submit({action:{name:\"loc:back\"}})}function init(){if(is_android){nav_right_label=document.getElementById(\"nav_right_label_android\")}else{nav_right_label=document.getElementById(\"nav_right_label\")}if(is_android){document.getElementById(\"ios_nav\").style.display=\"none\";document.getElementById(\"nav_back_img_android\").src=nav_back_png}else{if(!is_android){}else{document.getElementById(\"android_nav\").style.display=\"none\"}document.getElementById(\"nav_back_img\").src=nav_back_png}document.getElementById(\"close_img\").src=close_png;if(is_android){document.getElementById(\"seq_area\").list=flybird.rpcData.payments}else{for(var b=0;b<flybird.rpcData.payments.length;b++){createItem(flybird.rpcData.payments[b],b)}}if(is_flybird){var c=document.querySelectorAll(\".switch\");for(var a=0;a<c.length;a++){if(a==0){c[a].value=switch_seq}else{if(a==1){c[a].value=switch_jfb}}}}else{document.getElementById(\"switch_jfb\").id=\"\";update_switch_css(createSwitch(\"cell_seq\",\"switch_seq_css\",function(){onSwitch_seq()}),switch_seq);update_switch_css(createSwitch(\"cell_jfb\",\"switch_jfb_css\",function(){onSwitch_jfb()}),switch_jfb);c=document.querySelectorAll(\".switch\");for(var a=0;a<c.length;a++){c[a].style.display=\"none\"}}update_seq()};"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"href":"com.alipay.android.app/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"children":[{"tag":"text","text":".item {height:100px; width:100%; zIndex:0; position:absolute;}\n\n.box_flex {display:-webkit-box; -webkit-box-align:center; -webkit-box-pack:center;}\n\n.sw_white {transition:0.2s; position:relative; left:1.5px; height:28px; width:48px; background-color:#fefefe; border-radius:14px;}\n.sw {box-shadow:2px 3px 8px 2px #e4e4e4; border: #cccccc 0.5px solid ; transition:0.2s;  position:relative; left:-46.5px; height:28px; width:28px; border-radius:13.5px; background-color:#ffffff;}\n.sw_by_css {display:-webkit-box; -webkit-box-align:center; height:31px; width:51px; background-color:#e4e4e4; border-radius:15.5px;}"}],"tag":"style"}],"tag":"head"},{"children":[{"children":[{"children":[{"children":[{"css":"common_nav_left_img","id":"nav_back_img","tag":"img"},{"children":[{"tag":"text","text":"返回"}],"css":"common_nav_left_text","tag":"p"}],"css":"common_nav_left_box","id":"nav_back","onclick":"onBack()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"默认付款方式"}],"css":"common_nav_center_text","tag":"label"}],"css":"common_nav_center_box","tag":"div"},{"children":[{"children":[{"tag":"text","text":"编辑"}],"css":"common_nav_right_text","id":"nav_right_label","tag":"label"}],"css":"common_nav_right_box","onclick":"onEdit()","tag":"div"}],"css":"common_nav_box","id":"ios_nav","tag":"div"},{"children":[{"children":[{"children":[{"css":"common_nav_left_img_android","id":"nav_back_img_android","tag":"img"}],"css":"common_nav_back_box_android","onclick":"onBack()","tag":"div"},{"css":"common_nav_line_android","tag":"div"},{"children":[{"tag":"text","text":"默认付款方式"}],"css":"common_nav_center_text common_p_reset","tag":"label"}],"css":"common_nav_title_android","id":"nav_back","tag":"div"},{"css":"common_nav_line_android","style":"margin-right:0px;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"编辑"}],"css":"common_nav_right_text","id":"nav_right_label_android","style":"margin-left:1px;","tag":"label"}],"css":"common_nav_right_box_android","onclick":"onEdit()","tag":"div"}],"css":"common_nav_box_android","id":"android_nav","tag":"div"}],"tag":"nav"},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"自定义付款方式顺序"}],"css":"common_cell_center_box_text","tag":"label"}],"style":"-webkit-box-flex:1.0;","tag":"div"},{"css":"switch common_checkbox_android","id":"switch_seq","oninput":"onSwitch_seq()","tag":"input","type":"checkbox"}],"css":"common_cell common_padding_left_right","id":"cell_seq","tag":"div"},{"css":"common_1px_line","id":"mid_line","tag":"div"},{"css":"dragList common_cell_animation","id":"seq_area","onmousemove":"touchMove()","onmouseup":"touchUp()","style":"position:relative;","tag":"div"},{"children":[{"css":"common_cell_footer_text","id":"switch_seq_tips","tag":"label"}],"css":"common_cell_footer_box common_cell_animation","tag":"div"},{"css":"common_1px_line common_cell_animation","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"优先使用集分宝"}],"css":"common_cell_center_box_text","tag":"label"}],"style":"-webkit-box-flex:1.0;","tag":"div"},{"css":"switch common_checkbox_android","id":"switch_jfb","oninput":"onSwitch_jfb()","tag":"input","type":"checkbox"}],"css":"common_cell common_padding_left_right common_cell_animation","id":"cell_jfb","tag":"div"},{"children":[{"css":"common_1px_line common_line_left_margin","tag":"div"}],"css":"common_cell_animation","style":"background-color:#ffffff;","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"可用红包"}],"css":"common_cell_center_box_text","tag":"label"}],"style":"-webkit-box-flex:1.0;","tag":"div"},{"children":[{"tag":"text","text":"默认使用"}],"css":"common_cell_center_box_text","id":"red_default","style":"color:#999999;","tag":"label"}],"css":"common_cell common_padding_left_right common_cell_animation","id":"cell_nopwd","tag":"div"},{"css":"common_1px_line common_cell_animation","tag":"div"}],"css":"common_full_main","id":"main_body","tag":"div"},{"children":[{"children":[{"children":[{"id":"close_img","style":"margin:15px;","tag":"img"}],"onclick":"oncloseDlg()","style":"width:40px; height:100%;","tag":"div"},{"children":[{"children":[{"tag":"text","text":"保存当前设置"}],"style":"font-size:17px; color:#000000;","tag":"label"}],"style":"display:-webkit-box; -webkit-box-align:center; -webkit-box-pack:center; -webkit-box-flex:1.0;","tag":"div"},{"style":"width:40px; height:100%;","tag":"div"}],"style":"height:48.5px; display:-webkit-box; -webkit-box-align:center; -webkit-box-pack:center;","tag":"div"},{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"tag":"text","text":"请输入支付密码，保存设置"}],"style":"font-size:14px; color:#999999;","tag":"label"}],"css":"box_flex","style":"padding-top:15px; padding-bottom:20px;","tag":"div"},{"children":[{"id":"spwd","oninput":"onSpwdInput()","style":"width:268px; height:47px; border-radius:4px; border:1 #cccccc; background-color:#ffffff; border-radius:4px;","tag":"input","type":"payword"}],"id":"spwd_area","style":"display:none; padding:0px 15px 15px 15px;","tag":"div"},{"children":[{"id":"pwd","oninput":"onPwdInput()","placeholder":"支付密码","style":"width:253px; display:block; height:47px; padding-left:15px; font-size:14px; border-radius:4px; border:1 #cccccc; background-color:#ffffff;","tag":"input","type":"password"},{"children":[{"tag":"text","text":"确定"}],"css":"common_button_main","disabled":"disabled","id":"btn_main","onclick":"submit()","style":"width:270px; margin-top:15px;","tag":"button"}],"css":"common_padding_left_right","id":"pwd_area","style":"display:none; width:100%; height:120px;","tag":"div"}],"id":"dlg","onkeydown":"oncloseDlg();","style":"width:300px; border:0px; background-color:#F5F5F5; border-radius:8px; padding:0px;","tag":"dialog"}],"css":"common_full_body","id":"body","onkeydown":"onBack();","onload":"init()","style":"-webkit-user-select: none;","tag":"body"}],"tag":"html"},"format":"JSON","name":"setting-channel","publishVersion":"150604","tag":"QUICKPAY","time":"0050","tplId":"QUICKPAY@setting-channel","tplVersion":"5.0.0"}