{"data":{"children":[{"children":[{"content":"text/html; charset=UTF-8","http-equiv":"Content-Type","tag":"meta"},{"content":"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui","name":"viewport","tag":"meta"},{"src":"cashier-card-detail-comm-cc.js","tag":"script"},{"children":[{"tag":"text","text":"var is_flybird=navigator.userAgent.toLowerCase().indexOf(\"flybird\")>=0;var is_android=navigator.userAgent.toLowerCase().indexOf(\"android\")>=0;var path=is_android?\"com.alipay.android.app/\":\"AlipaySDK.bundle/\";var nav_back_png=path+\"back.png\";var info_png=path+\"info.png\";var cvv_dlg_png=path+\"cvv.png\";var validate_dlg_png_android=path+\"mini_expiry_date_card.png\";var validate_dlg_png_ios=path+\"com_data.png\";var phone_dlg_png=path+\"phone_info.png\";var username=undefined;if(flybird.rpcData.needinput.username){username=flybird.rpcData.needinput.username.value}var certno=undefined;if(flybird.rpcData.needinput.certno){certno=flybird.rpcData.needinput.certno.value}var certtype=undefined;if(flybird.rpcData.needinput.certtype){certtype=flybird.rpcData.needinput.certtype[\"default\"]}if(flybird.rpcData.needinput.bankmobile==undefined){flybird.rpcData.needinput.bankmobile={disable:true,display:false}}var bankmobile=flybird.rpcData.needinput.bankmobile.value;var certtypeTextArray=new Array();var certtypeValueArray=new Array();if(username==undefined){username=\"\"}if(certno==undefined){certno=\"\"}if(certtype==undefined){certtype=\"\"}if(bankmobile==undefined){bankmobile=\"\"}function showProtocol(){var a=new Array();for(var b=0;b<flybird.rpcData.protocols.length;b++){a.push(flybird.rpcData.protocols[b][\"text\"])}ant.actionSheet({btns:a,cancelBtn:\"取消\"},function(c){ant.submit({action:{name:\"loc:openweb('\"+flybird.rpcData.protocols[c.index][\"url\"]+\"','\"+flybird.rpcData.protocols[c.index][\"text\"]+\"')\"}})})}function updateInputState(a,b){if(a.value.length){b.style.display=\"none\"}else{b.style.display=\"inline-block\"}}function checkInput(a,b){updateInputState(a,b);updateSubmitState()}function updateSubmitState(){var a=document.getElementsByTagName(\"input\");var c=false;for(var b=0;b<a.length;b++){if((!flybird.rpcData.cvv2)&&(a[b].id==\"cvv2\")){continue}if((!flybird.rpcData.validate)&&(a[b].id==\"validate\")){continue}if((!flybird.rpcData.needinput.bankmobile.display)&&(a[b].id==\"bankmobile\")){continue}if(a[b].value==undefined||a[b].value==\"\"){c=true;break}}document.getElementById(\"submit\").disabled=c}function onCvv2Input(){var a=document.getElementById(\"cvv2\");if(a.value.length>=3){a.blur()}checkInput(a,document.getElementById(\"cvv_info\"))}function onValidateInput(){var a=document.getElementById(\"validate\");checkInput(a,document.getElementById(\"validate_info\"))}function onPhoneInput(){var a=document.getElementById(\"bankmobile\");checkInput(a,document.getElementById(\"phone_info\"))}function hideKeyboard(){var a=document.querySelectorAll(\"input\");for(var b=0;b<a.length;b++){a[b].blur()}}function submit(){hideKeyboard();var e=certtype;if(flybird.rpcData.needinput.certtype){var d=document.getElementById(\"certtype\");var i=d.selectedIndex;e=certtypeValueArray[i]}var f={};if(flybird.rpcData.isCredit){f.action={name:\"/card/sign\",neec:\"6004\",host:flybird.rpcData.pci_url,https:true,enctype:\"application/x-www-form-urlencoded\",request_param:\"requestData\"}}else{f.action={name:\"/card/sign\",neec:\"6004\"}}f.action[\"params\"]={cardtype:flybird.rpcData.cardtype,bankcode:flybird.rpcData.bankcode,ccdctoken:flybird.rpcData.ccdctoken,hidden_card_no:flybird.rpcData.hidden_card_no};f.param={};var b=document.getElementById(\"username\");if(b&&b.value!=username){f.param[\"username\"]=b.value}var h=document.getElementById(\"certno\");if(h&&h.value!=certno){f.param[\"certno\"]=h.value;if(e==\"A\"){var a=\"(^\\\\d{15}$)|(^\\\\d{17}([0-9]|X)$)\";var l=h.value;var c=l.match(a);if(c==undefined){ant.toast({text:\"请输入正确的身份证号码\",type:\"fail\"},function(){h.focus()});return}}}if(flybird.rpcData.needinput.certtype){var d=document.getElementById(\"certtype\");var i=d.selectedIndex;var k=certtypeValueArray[i];if(d&&k!=certtype){f.param[\"certtype\"]=k}}var g=document.getElementById(\"bankmobile\");if(g&&g.value!=bankmobile){f.param[\"bankmobile\"]=g.value;if(e==\"A\"){var a=\"^1\\\\d{10}$\";var l=g.value;var c=l.match(a);if(c==undefined){ant.toast({text:\"请输入正确的手机号码\",type:\"fail\"},function(){g.focus()});return}}}if(flybird.rpcData.cvv2){var j=document.getElementById(\"cvv2\");if(j){f.param[\"cvv2\"]=j.value}}if(flybird.rpcData.validate){var m=document.getElementById(\"validate\");if(m){f.param[\"validate\"]=m.value}}ant.asyncSubmit(f,function(n){})}function onclick_cvv(){document.getElementById(\"dlg_img\").src=cvv_dlg_png;document.getElementById(\"dlg_text\").innerText=\"安全码是打印在信用卡背面签名区域的一组数字，一般是后3位或者4位数字。\";document.getElementById(\"dlg_title\").innerText=\"安全码说明\";document.getElementById(\"dlg\").showModal()}function onclick_validate(){if(is_android){document.getElementById(\"dlg_img\").src=validate_dlg_png_android}else{document.getElementById(\"dlg_img\").src=validate_dlg_png_ios}document.getElementById(\"dlg_text\").innerText=\"有效期是打印在信用卡正面卡号下方，标准格式为月份在前，年份在后的一串数字。\";document.getElementById(\"dlg_title\").innerText=\"有效期说明\";document.getElementById(\"dlg\").showModal()}function onclick_phone(){document.getElementById(\"dlg_img\").src=phone_dlg_png;document.getElementById(\"dlg_text\").innerText=\"银行预留的手机号是办理该银行卡时所填写的手机号码。\\n\\n没有预留、手机号忘记或者已停用，请联系银行客服更新处理。\";document.getElementById(\"dlg_title\").innerText=\"手机号说明\";document.getElementById(\"dlg\").showModal()}function init(){if(is_android){document.getElementById(\"ios_nav\").style.display=\"none\";document.getElementById(\"nav_back_img_android\").src=nav_back_png}else{if(!is_android){}else{document.getElementById(\"android_nav\").style.display=\"none\"}document.getElementById(\"nav_back_img\").src=nav_back_png}document.getElementById(\"cvv_info\").src=info_png;document.getElementById(\"validate_info\").src=info_png;document.getElementById(\"phone_info\").src=info_png;var f=document.getElementById(\"certtype\");f.style.marginLeft=-f.offsetWidth;if(flybird.rpcData.cvv2&&flybird.rpcData.validate){document.getElementById(\"center_line_top\").className=\"common_1px_line common_line_left_margin\";document.getElementById(\"center_line_bottom\").className=\"common_1px_line common_line_left_margin\"}else{if(flybird.rpcData.cvv2){document.getElementById(\"validate_area\").style.display=\"none\"}else{if(flybird.rpcData.validate){document.getElementById(\"cvv_area\").style.display=\"none\"}else{document.getElementById(\"validate_area\").style.display=\"none\";document.getElementById(\"cvv_area\").style.display=\"none\";document.getElementById(\"common_cell_footer_empty_box\").style.display=\"none\"}}}if(!flybird.rpcData.needinput.bankmobile.display){document.getElementById(\"bankMobileBox\").style.display=\"none\"}if(flybird.rpcData.needinput.certtype){var c=flybird.rpcData.needinput.certtype.value;var f=document.getElementById(\"certtype\");for(var h in c){var i=document.createElement(\"option\");i.text=h;i.value=c[h];certtypeTextArray.push(i.text);certtypeValueArray.push(i.value);if(i.value==flybird.rpcData.needinput.certtype[\"default\"]){i.selected=true;f.selectedIndex=certtypeTextArray.length-1;document.getElementById(\"certno\").placeholder=\"请输入\"+h+\"号码\"}f.options.add(i)}}else{document.getElementById(\"certno\").placeholder=\"请输入身份证号码\"}var b=document.getElementById(\"bankname\");b.innerText=flybird.rpcData.bankname;var g=document.getElementById(\"cardtype\");if(flybird.rpcData.isCredit){g.innerText=\"信用卡\"}else{g.innerText=\"储蓄卡\"}var a=document.getElementById(\"username\");a.value=username;if(flybird.rpcData.needinput.username.disable){a.disabled=flybird.rpcData.needinput.username.disable}var e=document.getElementById(\"certno\");e.value=certno;if(flybird.rpcData.needinput.certno.disable){e.disabled=flybird.rpcData.needinput.certno.disable}var d=document.getElementById(\"bankmobile\");d.value=bankmobile;if(flybird.rpcData.needinput.bankmobile.disable){d.disabled=flybird.rpcData.needinput.bankmobile.disable}if(flybird.rpcData.needinput.certtype==undefined){document.getElementById(\"certtype_area\").style.display=\"none\"}updateSubmitState();onPhoneInput()}function onBack(){hideKeyboard();ant.submit({action:{name:\"loc:back\"}})}function onSelectChange(){var a=document.getElementById(\"certtype\");var c=a.selectedIndex;var b=document.getElementById(\"certno\").placeholder;var d=\"请输入\"+certtypeTextArray[c]+\"号码\";document.getElementById(\"certno\").placeholder=d;if(b!=d){document.getElementById(\"certno\").value=\"\";updateSubmitState()}};"}],"tag":"script","type":"text/javascript"},{"href":"AlipaySDK.bundle/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"href":"com.alipay.android.app/common.css","rel":"stylesheet","tag":"link","type":"text/css"},{"tag":"style"}],"tag":"head"},{"children":[{"children":[{"children":[{"children":[{"css":"common_nav_left_img","id":"nav_back_img","tag":"img"},{"children":[{"tag":"text","text":"返回"}],"css":"common_nav_left_text","tag":"p"}],"css":"common_nav_left_box","onclick":"onBack()","tag":"div"},{"children":[{"children":[{"tag":"text","text":"填写银行卡信息"}],"css":"common_nav_center_text","tag":"label"}],"css":"common_nav_center_box","tag":"div"},{"css":"common_nav_right_box","tag":"div"}],"css":"common_nav_box","id":"ios_nav","tag":"div"},{"children":[{"children":[{"children":[{"css":"common_nav_left_img_android","id":"nav_back_img_android","tag":"img"}],"css":"common_nav_back_box_android","onclick":"onBack()","tag":"div"},{"css":"common_nav_line_android","tag":"div"},{"children":[{"tag":"text","text":"填写银行卡信息"}],"css":"common_nav_center_text common_p_reset","tag":"label"}],"css":"common_nav_title_android","id":"nav_back","tag":"div"},{"css":"common_nav_right_box","tag":"div"}],"css":"common_nav_box_android","id":"android_nav","tag":"div"}],"tag":"nav"},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"卡类型"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_left_box_text","id":"bankname","tag":"label"},{"css":"common_cell_left_box_text","id":"cardtype","style":"margin-left:20px;","tag":"label"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"},{"css":"common_cell_footer_empty_box","tag":"div"},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"安全码"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"cvv2","oninput":"onCvv2Input()","placeholder":"卡背面末三位数字","tag":"input","type":"num"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"cvv_info","onclick":"onclick_cvv()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","id":"center_line_top","tag":"div"}],"id":"cvv_area","style":"background-color:#ffffff;","tag":"div"},{"children":[{"css":"common_1px_line","id":"center_line_bottom","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"有效期"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"validate","oninput":"onValidateInput()","placeholder":"月份/年份","tag":"input","type":"month"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"validate_info","onclick":"onclick_validate()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"}],"id":"validate_area","style":"background-color:#ffffff; margin-top:-1;","tag":"div"},{"css":"common_cell_footer_empty_box","id":"common_cell_footer_empty_box","tag":"div"},{"children":[{"css":"common_1px_line","id":"existingItem","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"姓名"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"username","oninput":"updateSubmitState()","tag":"input"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"children":[{"css":"common_1px_line common_line_left_margin","tag":"div"}],"css":"common_cell_animation","style":"background-color:#ffffff;","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"证件号"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"certno","oninput":"updateSubmitState()","placeholder":"","tag":"input","type":"NumbersAndPunctuation"}],"css":"common_cell_center_box","tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"tag":"text","text":"信息加密处理，仅用于银行验证"}],"css":"common_cell_footer_text","tag":"label"},{"children":[{"children":[{"tag":"text","text":"选择证件类型"}],"css":"common_cell_footer_text common_theme_text_color","id":"certtype_label","tag":"label"},{"id":"certtype","name":"certtype","oninput":"onSelectChange()","style":"font-size:12px;","tag":"select"}],"id":"certtype_area","style":"-webkit-box-flex:1.0; text-align:right;","tag":"div"}],"css":"common_cell_box common_cell_footer_box","tag":"div"},{"children":[{"css":"common_1px_line","tag":"div"},{"children":[{"children":[{"children":[{"tag":"text","text":"手机号"}],"css":"common_cell_left_box_text","tag":"label"}],"css":"common_cell_left_box","tag":"div"},{"children":[{"css":"common_cell_input","id":"bankmobile","oninput":"onPhoneInput();","placeholder":"请输入银行预留手机号","tag":"input","type":"num"}],"css":"common_cell_center_box","tag":"div"},{"children":[{"css":"common_card_detail_info_android","id":"phone_info","onclick":"onclick_phone()","tag":"img"}],"tag":"div"}],"css":"common_cell common_padding_left_right","tag":"div"},{"css":"common_1px_line","tag":"div"}],"id":"bankMobileBox","tag":"div"},{"children":[{"children":[{"tag":"text","text":"同意"}],"css":"common_cell_footer_text","tag":"label"},{"children":[{"children":[{"tag":"text","text":"《服务协议》"}],"css":"common_cell_footer_text common_theme_text_color","onclick":"showProtocol()","tag":"label"}],"tag":"div"}],"css":"common_cell_box common_cell_footer_box","tag":"div"}],"tag":"div"},{"children":[{"children":[{"tag":"text","text":"下一步"}],"css":"common_button_main","disabled":"true","id":"submit","onclick":"submit()","tag":"button"}],"css":"common_padding_left_right common_padding_bottom","tag":"div"}],"css":"common_full_main","id":"main_body","tag":"div"},{"children":[{"id":"dlg_title","style":"text-align:center; font-size:17px; color:#000000; font-weight:bold; padding:10px;","tag":"p"},{"children":[{"id":"dlg_img","tag":"img"}],"style":"text-align:center;","tag":"div"},{"id":"dlg_text","style":"font-size:14px; color:#000000; padding:15px;","tag":"p"},{"css":"common_1px_line","tag":"div"},{"children":[{"tag":"text","text":"知道了"}],"css":"common_theme_text_color","id":"btn_main","onclick":"document.getElementById('dlg').close()","style":"width:100%; height:50px; font-size:20px;","tag":"button"}],"id":"dlg","style":"width:300px; border:0px; background-color:#FFFFFF; border-radius:8px; padding:0px;","tag":"dialog"}],"css":"common_full_body","id":"body","onkeydown":"onBack();","onload":"init()","tag":"body"}],"tag":"html"},"format":"JSON","name":"cashier-card-detail","publishVersion":"150806","tag":"QUICKPAY","time":"0003","tplId":"QUICKPAY@cashier-card-detail","tplVersion":"5.0.1"}