!function(e){if(!window.WeiboJSBridge){var n,t,i,r;!function(){function e(e,n){try{return e()}finally{n()}}function o(e,n,t,i){var r=["require","exports","module"];this.id=l++,this.name=e,this.deps=!n.length&&t.length?r:n,this.exports=i||{},this.callback=t,this.state=void 0}function a(e,n){if("."!==e.charAt(0))return e;var t,i,r=e.split("/"),o=n.split("/"),a=o.slice(0,-1),f=r.length;for(t=0;f>t;t++)if(i=r[t],".."===i)a.pop();else{if("."===i)continue;a.push(i)}return a.join("/")}function f(e,n,t){var r,o,f=e.deps,u=f.length,s=new Array(u),c={},d=u;for(o=0;d>o;o++)r=f[o],"exports"===r?c.exports=s[o]=t:"require"===r?s[o]=function(e){return i(a(e,n))}:"module"===r?(e.exports=t,c=s[o]=e):s[o]=i(a(r,n));return{deps:s,module:c}}var u;u=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var s={},c={},d=!1,l=0;n=function(e,n,t){u(n)||(t=n,n=[]),s[e]=new o(e,n,t)},n.amd={},r=i=t=function(n){var t=s[n];if(!t)throw new Error("Could not find module "+n);if(t.state!==d&&c.hasOwnProperty(n))return c[n];var i,r,o=!1;c[n]={},e(function(){i=f(t,n,c[n]),r=t.callback.apply(this,i.deps),o=!0},function(){o||(t.state=d)});var a;return a=void 0===r&&i.module.exports?i.module.exports:c[n]=r,null===a||"object"!=typeof a&&"function"!=typeof a||void 0!==a["default"]||(a["default"]=a),c[n]=a,a},r.entries=r._eak_seen=s,r.clear=function(){r.entries=r._eak_seen=s={},c={}}}(),n("wbjs-core",["wbjs-dispatcher","wbjs-utilities","exports"],function(e,n,t){"use strict";function i(e){for(var n in G)if(G[n]===e)return n;return""}function r(e){return e?S[e]:null}function o(e){"object"!=typeof e&&(e={}),S=e}function a(e){for(var n in e)L[n]=e[n]}function f(){return L.debug}function u(e){var n=document.getElementById(e);if(n){if("iframe"===n.tagName.toLowerCase())return n;n.parentNode.removeChild(n),n=null}return!n&&T()&&(n=document.createElement("iframe"),n.id=e,n.style.display="none",document.documentElement.appendChild(n)),n}function s(){return h&&h.parentElement!==document.documentElement&&(h=null),h||(h=u("__WeiboJSInvokeIframe")),h}function c(){return _||(_=u("__WeiboJSDataTransferIframe")),_}function d(e,n){void 0===n&&(n="dummy");var t=window[K],i="transferData";t&&t[i]?t[i](JSON.stringify({scene:e,data:n})):(c(),_.src=z+"/"+e+"&"+q(n))}function l(){var e=window[K],n="invoke";if(e&&e[n])return e[n](),void 0;var t=s();t?(t.src=R,W=!1):W=!0}function v(e,n,t,i){if(e&&"string"==typeof e){"object"!=typeof n&&(n={});var r=(k++).toString(),o={action:e,params:n,type:i};"function"==typeof t?o[A]=t:"object"==typeof t&&(o[O]=t[O],o[N]=t[N],o[A]=t[A]),J[r]=o;var a={action:e,params:n};a[j]=i,r&&(a[B]=r),x.push(a),l()}}function p(e,n,t){if(e&&"string"==typeof e){var i={},r=C;"function"==typeof n?i[r]=n:"object"==typeof n&&(i=n),i[r]||(i[r]=function(){});var o=D[e];o||(o=[],D[e]=o);var a=i[r];if(o.push(a),!t)if(M[e]){var f=G.OK,u=i[O];u&&u({},f);var s=i[A];s&&s({},!0,f)}else{M[e]=!0;var c=i[A];i[A]=function(n,t,i){t||(M[e]=!1),c&&c(n,t,i)},v(e,null,i,"register")}return a}}function g(e,n){if(!e||"string"!=typeof e)return!1;var t=D[e];if(t)if(n){var i=t.indexOf(n);if(-1===i)return!1;t.splice(i,1)}else for(;t.length;)t.pop();return!t.length&&M[e]&&(M[e]=!1,v(e,null,{"final":function(n,t){t||(M[e]=!0)}},"unregister")),!0}function m(e,n){if(!e||"string"!=typeof e)return!1;var t=!1,i=D[e];if(i){var r,o=i.length;for(r=0;o>r;r++)i[r](n),t=!0}return t}function y(e,n,t){v(e,n,t,"call")}function w(e){var n=e[j];switch(n){case"callback":var t=e[B];if("string"==typeof t&&"object"==typeof J[t]){var r=e.params,o=!e.failed,a=e.status,u=J[t],s=o?u[O]:u[N];"function"==typeof s&&s(r,a),"function"==typeof u[A]&&u[A](r,o,a);var c=f();if(c&&!o){var d=u.action,l=F(u.params),v=i(a)+" ("+a+")",p='Action "'+d+'" invoke failed! \nreason: '+v+". \nparams: "+l;alert(p)}delete J[t]}break;case"event":var g=e[I];if(m(g,e.params))return}}function b(){var e=F(x);return x=[],d("SCENE_MESSAGEQUEUE",e),e}var h,_,E=e["default"],S={},R="sinaweibo://bridge_invoke_message",j="__msg_type",B="__callback_id",I="__event_name",O="success",N="fail",A="final",C="trigger",x=[],J=[],k=1e3,D={},W=!1,L={},M={},T=E.domIsReady,U=E.onDomReady,F=JSON.stringify,G={OK:200,MISSING_PARAMS:400,ILLEGAL_ACCESS:403,INTERNAL_ERROR:500,ACTION_NOT_FOUND:501,NO_RESULT:550,USER_CANCELLED:550,SERVICE_FORBIDDEN:553},P=n["default"],q=P.base64encode,z="sinaweibo://bridge_transfer_data",K="WeiboJSBridgeDataTransfer";U(function(){W&&l()});var Q={invoke:y,on:p,off:g,STATUS_CODE:G,config:a,_messageQueue:b,_handleMessage:w,_trigger:m,_env:r,_setEnv:o};window.__WeiboJSBridge=Q,t["default"]=Q}),n("wbjs-dispatcher",["exports"],function(e){"use strict";function n(e){"function"==typeof e&&(v?e():s.push(e))}function t(e){"function"==typeof e&&(p?e():c.push(e))}function i(e){"function"==typeof e&&(v&&p?e():d.push(e))}function r(e){"function"==typeof e&&l.push(e)}function o(){if(p&&v)for(;d.length;){var e=d.shift();e()}}function a(){if(!p){for(p=!0;c.length;){var e=c.shift();e()}o()}}function f(){if(!v){for(v=!0;s.length;){var e=s.shift();e()}o()}}function u(e){for(var n=l.length-1;n>=0;n--){var t=l[n];t(e)}}var s=[],c=[],d=[],l=[],v=!1,p=!1;"loading"!==document.readyState?f():document.addEventListener("DOMContentLoaded",f,!1),e["default"]={_bridgeBecomeReady:a,_iframeBecomeReady:u,bridgeIsReady:function(){return p},domIsReady:function(){return v},onDomReady:n,onBridgeReady:t,onBridgeDomReady:i,onIframeReady:r}}),n("wbjs-utilities",["exports"],function(e){"use strict";var n={};n.base64encode=function(e){return void 0===e?e:window.btoa(window.unescape(window.encodeURIComponent(e)))},n.forEachIframe=function(e){function n(e,t){var i=e.frames;t.push(i);var r;for(r=i.length-1;r>=0;r--)n(i[r],t);return t}if("function"==typeof e){var t,i,r=n(window.top,[]);for(t=r.length-1;t>=0;t--)i=r[t],i!==window&&e(i)}},e["default"]=n}),n("wbjs-events",["wbjs-core","wbjs-iframe","wbjs-dispatcher"],function(e,n,t){"use strict";function i(e){return e=parseInt(e,10),(window.isNaN(e)||0===e)&&(e=100),e=window.Math.max(20,e),e=window.Math.min(e,400),e}function r(){var e=i(d("initTextPercent"));return{percent:e}}function o(){function e(e,n,t){s(e,function(e){if(t){var i=window[t];if("function"==typeof i)return i(e),void 0}n(e)},!0)}e("_fontSettingChanged",function(e){e&&a.invoke("privateChangeFont",e)},"WeiboJSBridgeSetFont")}var a=e["default"],f=n["default"],u=t["default"],s=a.on,c=a._trigger,d=a._env,l=a._setEnv;u.onBridgeDomReady(function(){c("_fontSettingChanged",r())}),s("bridge:initialize",function(e){if(!u.bridgeIsReady()){l(e),o(),window.WeiboJSBridge=a,u._bridgeBecomeReady();var n=document.createEvent("Events");n.initEvent("WeiboJSBridgeReady"),n.bridge=a,document.dispatchEvent(n),f.mainFrameBecomeReady()}},!0)}),n("wbjs-iframe",["wbjs-core","wbjs-utilities","wbjs-dispatcher","exports"],function(e,n,t,i){"use strict";function r(e){function n(e){var n=e.indexOf(o);return-1===n?null:e.substring(n+o.length)}function t(e,n,t,i){l(e,n,function(e,n,r){if(t){var a="WeiboJSBridge"+o+t+o;e={params:e,success:n,code:r};try{a+=c(e)}catch(f){a+=c({success:!1,code:p.INTERNAL_ERROR})}i.source.postMessage(a,i.origin)}})}function i(e,n,t){e.length&&v(e,function(e){if(n){var i="WeiboJSBridge"+o+n;if(e)try{i+=o+c(e)}catch(r){}t.source.postMessage(i,t.origin)}})}if(e.data===s){if(e.source===window.top)return;var r=e.source;return r.postMessage(s,e.origin),f._iframeBecomeReady(r),void 0}var o=u,a=(e.data||"").trim();if(0===a.indexOf("WeiboJSBridge"+o)&&(a=n(a),a)){var g=a.split(o)[0];if(a=n(a),a){var m=a.split(o)[0];a=n(a);var y=null;a&&(y=a.split(o)[0],a=n(a));var w=null;if(a)try{w=d(a)}catch(b){}"invoke"===g?t(m,w,y,e):"on"===g&&i(m,y,e)}}}var o=e["default"],a=n["default"],f=t["default"],u=":::",s="WeiboJSBridge"+u+"communicationReady",c=window.JSON.stringify,d=window.JSON.parse,l=o.invoke,v=o.on,p=o.STATUS_CODE;window.addEventListener("message",r);var g={mainFrameBecomeReady:function(){a.forEachIframe(function(e){e.postMessage(s,"*")})},triggerDefaultEvent:function(e,n){if(e.length){n||(n={});var t=u,i="WeiboJSBridge"+t+e+t+c(n);a.forEachIframe(function(e){e.postMessage(i,"*")})}}};i["default"]=g}),n("wbjs",["wbjs-core","wbjs-iframe","wbjs-events","exports"],function(e,n,t,i){"use strict";var r=e["default"];i["default"]=r}),i("wbjs")["default"]._trigger("bridge:initialize",e)}}